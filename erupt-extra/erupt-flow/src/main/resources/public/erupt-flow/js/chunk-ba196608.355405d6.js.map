{"version":3,"sources":["webpack:///./src/views/admin/FormsPanel.vue?ef6c","webpack:///./src/api/design.js","webpack:///./src/views/admin/FormsPanel.vue","webpack:///src/views/admin/FormsPanel.vue","webpack:///./src/views/admin/FormsPanel.vue?3f44","webpack:///./src/views/admin/FormsPanel.vue?87ce"],"names":["getFormGroups","param","request","url","method","params","getFormGroupsWithProcDef","groupItemsSort","data","groupSort","createGroup","groupName","updateGroup","groupId","removeGroup","updateForm","formId","createForm","getFormDetail","id","updateFormDetail","removeForm","getEruptForms","render","_vm","this","_c","_self","ref","staticClass","_v","attrs","on","$event","newProcess","addGroup","groups","animation","chosenClass","sort","scroll","_l","group","gidx","key","class","_s","items","length","_e","staticStyle","slot","nativeOn","editGroup","delGroup","formSort","movingGroup","item","index","logo","icon","style","background","formName","remark","updated","isStop","editFrom","stopFrom","moveSelect","model","value","callback","$$v","expression","g","directives","name","rawName","moveFrom","undefined","staticRenderFns","components","draggable","visible","created","sessionStorage","setItem","getToken","mounted","getGroups","methods","then","rsp","forEach","JSON","parse","$store","commit","getTemplateData","$router","push","map","catch","err","$message","error","response","message","$prompt","confirmButtonText","cancelButtonText","inputPattern","inputErrorMessage","inputPlaceholder","success","warning","$confirm","type","inputValue","component"],"mappings":"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","file":"js/chunk-ba196608.355405d6.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FormsPanel.vue?vue&type=style&index=0&id=19875ec1&prod&lang=less&scoped=true&\"","import request from '@/api/request.js'\n\n// 查询表单组\nexport function getFormGroups(param) {\n  return request({\n    url: '/admin/form/group',\n    method: 'get',\n    params: param\n  })\n}\n\n// 查询表单组\nexport function getFormGroupsWithProcDef(param) {\n  return request({\n    url: '/process/groups',\n    method: 'get',\n    params: param\n  })\n}\n\n// 表单排序\nexport function groupItemsSort(param) {\n  return request({\n    url: '/admin/form/sort',\n    method: 'put',\n    data: param\n  })\n}\n\n// 表单分组排序\nexport function groupSort(param) {\n  return request({\n    url: '/admin/form/group/sort',\n    method: 'put',\n    data: param\n  })\n}\n\n// 创建表单组\nexport function createGroup(groupName) {\n  return request({\n    url: '/admin/form/group',\n    method: 'post',\n    params: {\n      groupName: groupName\n    }\n  })\n}\n\n// 创建表单组\nexport function updateGroup(groupId, param) {\n  return request({\n    url: '/admin/form/group/'+groupId,\n    method: 'put',\n    data: param\n  })\n}\n\n// 删除表单组\nexport function removeGroup(groupId) {\n  return request({\n    url: '/admin/form/group/'+groupId,\n    method: 'delete'\n  })\n}\n\n// 获取表单分组\nexport function getGroup() {\n  return request({\n    url: '/admin/form/group/list',\n    method: 'get'\n  })\n}\n\n// 更新表单\nexport function updateForm(formId, param) {\n  return request({\n    url: '/admin/form/'+formId,\n    method: 'put',\n    data: param\n  })\n}\n\n//创建表单\nexport function createForm(param){\n  return request({\n    url: '/admin/form',\n    method: 'post',\n    data: param\n  })\n}\n\n// 查询表单详情\nexport function getFormDetail(id) {\n  return request({\n    url: '/admin/form/detail/' + id,\n    method: 'get'\n  })\n}\n\n// 更新表单详情\nexport function updateFormDetail(param) {\n  return request({\n    url: '/admin/form/detail',\n    method: 'put',\n    data: param\n  })\n}\n\n// 更新表单详情\nexport function removeForm(param) {\n  return request({\n    url: '/admin/form/'+param.formId,\n    method: 'delete',\n    data: param\n  })\n}\n\n// 查询已加载的EruptForm\nexport function getEruptForms() {\n  return request({\n    url: '/forms',\n    method: 'get'\n  })\n}\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{ref:\"panel\",staticClass:\"from-panel\"},[_c('div',{staticClass:\"from-title\"},[_c('span',[_vm._v(\"流程面板\")]),_c('div',[_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-plus\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.newProcess('')}}},[_vm._v(\"新建表单\")]),_c('el-button',{attrs:{\"icon\":\"el-icon-plus\",\"size\":\"mini\"},on:{\"click\":_vm.addGroup}},[_vm._v(\"新建分组\")])],1)]),_c('draggable',{attrs:{\"list\":_vm.groups,\"group\":\"group\",\"handle\":\".group-sort\",\"filter\":\".undrag\",\"options\":{animation: 300, chosenClass:'choose', sort:true, scroll: true}},on:{\"start\":function($event){},\"end\":_vm.groupSort}},_vm._l((_vm.groups),function(group,gidx){return _c('div',{key:gidx,class:{'form-group':true, 'undrag': false}},[_c('div',{staticClass:\"form-group-title\"},[_c('span',[_vm._v(_vm._s(group.groupName))]),_c('span',[_vm._v(\"(\"+_vm._s(group.items.length)+\")\")]),(group.groupId>0)?_c('i',{staticClass:\"el-icon-rank group-sort\",attrs:{\"title\":'长按拖动可对分组排序'}}):_vm._e(),(group.groupId>0)?_c('div',[_c('el-dropdown',[_c('el-button',{staticStyle:{\"color\":\"#8c939d\"},attrs:{\"type\":\"text\",\"icon\":\"el-icon-setting\"}},[_vm._v(\"编辑分组\")]),_c('el-dropdown-menu',{attrs:{\"slot\":\"dropdown\"},slot:\"dropdown\"},[_c('el-dropdown-item',{attrs:{\"icon\":\"el-icon-edit-outline\"},nativeOn:{\"click\":function($event){return _vm.editGroup(group)}}},[_vm._v(\"修改名称\")]),_c('el-dropdown-item',{attrs:{\"icon\":\"el-icon-delete\"},nativeOn:{\"click\":function($event){return _vm.delGroup(group)}}},[_vm._v(\"删除分组\")])],1)],1)],1):_vm._e()]),_c('draggable',{staticStyle:{\"width\":\"100%\",\"min-height\":\"25px\"},attrs:{\"list\":group.items,\"group\":'group_'+group.groupId,\"filter\":\".undrag\",\"handle\":\".form-sort\",\"options\":{animation: 300, chosenClass:'choose', scroll: true, sort:true}},on:{\"end\":_vm.formSort,\"start\":function($event){_vm.movingGroup = group}}},_vm._l((group.items),function(item,index){return _c('div',{key:index,class:{'form-group-item':true, 'undrag': false}},[_c('div',{staticClass:\"form-sort\",attrs:{\"title\":\"长按拖动进行排序\"}},[_c('i',{class:item.logo.icon,style:('background: '+item.logo.background)}),_c('span',[_vm._v(_vm._s(item.formName))])]),_c('div',{staticClass:\"desp\"},[_vm._v(_vm._s(item.remark))]),_c('div',[_c('span',[_vm._v(\"最后更新：\"+_vm._s(item.updated))])]),_c('div',[(!item.isStop)?_c('div',[_c('el-button',{attrs:{\"icon\":\"el-icon-edit-outline\",\"size\":\"mini\",\"type\":\"text\"},on:{\"click\":function($event){return _vm.editFrom(item, group)}}},[_vm._v(\"编辑 \")]),_c('el-button',{attrs:{\"type\":\"text\",\"icon\":\"el-icon-close\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.stopFrom(item)}}},[_vm._v(\"停用\")]),_c('el-popover',{staticStyle:{\"margin-left\":\"10px\"},attrs:{\"placement\":\"left\",\"trigger\":\"click\",\"width\":\"400\"},on:{\"show\":function($event){_vm.moveSelect === null}}},[_c('el-radio-group',{attrs:{\"size\":\"mini\"},model:{value:(_vm.moveSelect),callback:function ($$v) {_vm.moveSelect=$$v},expression:\"moveSelect\"}},_vm._l((_vm.groups),function(g){return _c('el-radio',{directives:[{name:\"show\",rawName:\"v-show\",value:(g.groupId > 0),expression:\"g.groupId > 0\"}],key:g.id,staticStyle:{\"margin\":\"10px\"},attrs:{\"label\":g.groupId,\"border\":\"\",\"disabled\":g.groupId === group.groupId}},[_vm._v(_vm._s(g.groupName)+\" \")])}),1),_c('div',{staticStyle:{\"text-align\":\"right\",\"margin\":\"0\"}},[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.moveFrom(item)}}},[_vm._v(\"确定\")])],1),_c('el-button',{attrs:{\"slot\":\"reference\",\"icon\":\"el-icon-folder\",\"size\":\"mini\",\"type\":\"text\"},slot:\"reference\"},[_vm._v(\"移动到 \")])],1)],1):_vm._e(),(item.isStop)?_c('div',[_c('el-button',{attrs:{\"icon\":\"el-icon-edit-outline\",\"size\":\"mini\",\"type\":\"text\"},on:{\"click\":function($event){return _vm.editFrom(item, group)}}},[_vm._v(\"编辑 \")]),_c('el-button',{attrs:{\"type\":\"text\",\"icon\":\"el-icon-check\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.stopFrom(item)}}},[_vm._v(\"启用\")]),_c('el-button',{attrs:{\"type\":\"text\",\"icon\":\"el-icon-remove\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.removeForm(item)}}},[_vm._v(\"删除\")])],1):_vm._e()])])}),0),((group.items === undefined || group.items.length === 0) && group.groupId===0)?_c('div',{staticStyle:{\"text-align\":\"center\"}},[_c('p',{staticStyle:{\"color\":\"#C0C4CC\"}},[_vm._v(\"没有分组的流程会显示在此处\")])]):_vm._e(),((group.items === undefined || group.items.length === 0) && group.groupId===-1)?_c('div',{staticStyle:{\"text-align\":\"center\"}},[_c('p',{staticStyle:{\"color\":\"#C0C4CC\"}},[_vm._v(\"停用的流程会显示在此处\")])]):_vm._e(),((group.items === undefined || group.items.length === 0)&&group.groupId>0)?_c('div',{staticStyle:{\"text-align\":\"center\"}},[_c('el-button',{staticStyle:{\"padding-top\":\"0\"},attrs:{\"icon\":\"el-icon-plus\",\"type\":\"text\"},on:{\"click\":function($event){return _vm.newProcess(group.groupId)}}},[_vm._v(\"创建新表单 \")])],1):_vm._e()],1)}),0)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"from-panel\" ref=\"panel\">\n    <div class=\"from-title\">\n      <!--<el-button icon=\"el-icon-back\" type=\"info\" size=\"mini\" circle plain style=\"margin-right: 15px\" @click=\"$router.push('/')\"></el-button>-->\n      <span>流程面板</span>\n      <div>\n        <el-button type=\"primary\" icon=\"el-icon-plus\" size=\"mini\" @click=\"newProcess('')\">新建表单</el-button>\n        <el-button icon=\"el-icon-plus\" @click=\"addGroup\" size=\"mini\">新建分组</el-button>\n      </div>\n    </div>\n    <draggable :list=\"groups\" group=\"group\" handle=\".group-sort\" filter=\".undrag\" @start=\"\" @end=\"groupSort\"\n               :options=\"{animation: 300, chosenClass:'choose', sort:true, scroll: true}\">\n      <div :class=\"{'form-group':true, 'undrag': false}\" v-for=\"(group, gidx) in groups\" :key=\"gidx\">\n        <div class=\"form-group-title\">\n          <span>{{ group.groupName }}</span>\n          <span>({{ group.items.length }})</span>\n          <i v-if=\"group.groupId>0\" class=\"el-icon-rank group-sort\" :title=\"'长按拖动可对分组排序'\"></i>\n          <div v-if=\"group.groupId>0\">\n            <el-dropdown>\n              <el-button type=\"text\" icon=\"el-icon-setting\" style=\"color: #8c939d\">编辑分组</el-button>\n              <el-dropdown-menu slot=\"dropdown\">\n                <el-dropdown-item icon=\"el-icon-edit-outline\" @click.native=\"editGroup(group)\">修改名称</el-dropdown-item>\n                <el-dropdown-item icon=\"el-icon-delete\" @click.native=\"delGroup(group)\">删除分组</el-dropdown-item>\n              </el-dropdown-menu>\n            </el-dropdown>\n          </div>\n        </div>\n        <draggable style=\"width: 100%; min-height:25px\" :list=\"group.items\"\n                   :group=\"'group_'+group.groupId\" filter=\".undrag\" handle=\".form-sort\" @end=\"formSort\"\n                   @start=\"movingGroup = group\"\n                   :options=\"{animation: 300, chosenClass:'choose', scroll: true, sort:true}\">\n          <div :class=\"{'form-group-item':true, 'undrag': false}\" v-for=\"(item, index) in group.items\" :key=\"index\">\n            <div class=\"form-sort\" title=\"长按拖动进行排序\">\n              <i :class=\"item.logo.icon\" :style=\"'background: '+item.logo.background\"></i>\n              <span>{{ item.formName }}</span>\n            </div>\n            <div class=\"desp\">{{ item.remark }}</div>\n            <div>\n              <span>最后更新：{{ item.updated }}</span>\n            </div>\n            <div>\n              <!-- 正常的按钮组 -->\n              <div v-if=\"!item.isStop\">\n                <el-button icon=\"el-icon-edit-outline\" size=\"mini\" type=\"text\" @click=\"editFrom(item, group)\">编辑\n                </el-button>\n                <el-button type=\"text\" icon=\"el-icon-close\" size=\"mini\" @click=\"stopFrom(item)\">停用</el-button>\n\n                <el-popover placement=\"left\" style=\"margin-left: 10px\" trigger=\"click\" width=\"400\"\n                            @show=\"moveSelect === null\">\n                  <el-radio-group v-model=\"moveSelect\" size=\"mini\">\n                    <el-radio :label=\"g.groupId\" border v-for=\"g in groups\" :key=\"g.id\" v-show=\"g.groupId > 0\"\n                              :disabled=\"g.groupId === group.groupId\" style=\"margin: 10px;\">{{ g.groupName }}\n                    </el-radio>\n                  </el-radio-group>\n                  <div style=\"text-align: right; margin: 0\">\n                    <el-button type=\"primary\" size=\"mini\" @click=\"moveFrom(item)\">确定</el-button>\n                  </div>\n                  <el-button slot=\"reference\" icon=\"el-icon-folder\" size=\"mini\" type=\"text\">移动到\n                  </el-button>\n                </el-popover>\n              </div>\n              <!-- 被禁用的按钮组 -->\n              <div v-if=\"item.isStop\">\n                <el-button icon=\"el-icon-edit-outline\" size=\"mini\" type=\"text\" @click=\"editFrom(item, group)\">编辑\n                </el-button>\n                <el-button type=\"text\" icon=\"el-icon-check\" size=\"mini\" @click=\"stopFrom(item)\">启用</el-button>\n                <el-button type=\"text\" icon=\"el-icon-remove\" size=\"mini\" @click=\"removeForm(item)\">删除</el-button>\n              </div>\n\n            </div>\n          </div>\n        </draggable>\n        <div v-if=\"(group.items === undefined || group.items.length === 0) && group.groupId===0\"\n             style=\"text-align: center\">\n          <p style=\"color: #C0C4CC\">没有分组的流程会显示在此处</p>\n        </div>\n        <div v-if=\"(group.items === undefined || group.items.length === 0) && group.groupId===-1\"\n             style=\"text-align: center\">\n          <p style=\"color: #C0C4CC\">停用的流程会显示在此处</p>\n        </div>\n        <div style=\"text-align: center\" v-if=\"(group.items === undefined || group.items.length === 0)&&group.groupId>0\">\n          <el-button icon=\"el-icon-plus\" style=\"padding-top: 0\" type=\"text\" @click=\"newProcess(group.groupId)\">创建新表单\n          </el-button>\n        </div>\n      </div>\n    </draggable>\n  </div>\n</template>\n\n<script>\nimport draggable from \"vuedraggable\";\nimport {\n  createGroup,\n  getFormGroups,\n  groupItemsSort,\n  groupSort,\n  removeForm,\n  removeGroup,\n  updateForm,\n  updateGroup\n} from '@/api/design'\nimport {getToken} from \"@/api/auth\";\n\nexport default {\n  name: \"FormsPanel\",\n  components: {draggable},\n  data() {\n    return {\n      moveSelect: '',\n      movingGroup: {},\n      visible: false,\n      groups: []\n    }\n  },\n  created() {\n    //重新设置token\n    sessionStorage.setItem(\"token\", getToken());\n  },\n  mounted() {\n    this.getGroups()\n  },\n  methods: {\n    getGroups() {\n      getFormGroups().then(rsp => {\n        this.groups = rsp.data\n        //解析图标json\n        this.groups.forEach(group => {\n          group.items.forEach(item => {\n            item.logo = JSON.parse(item.logo)\n          })\n        })\n      });\n    },\n    newProcess(groupId) {\n      this.$store.commit(\"setTemplate\", this.getTemplateData());\n      this.$store.commit(\"setIsEdit\", false);\n      this.$router.push(\"/admin/design?_token=\" + getToken() + \"&groupId=\" + groupId);//默认为其他分组\n    },\n    groupSort() {\n      if (this.groups.length <= 0) {\n        return;\n      }\n      groupSort(this.groups.map(g => g.groupId)).then(rsp => {\n        //this.$message.success(rsp.message)\n        this.getGroups()\n      }).catch(err => {\n        this.getGroups()\n        this.$message.error(err.response.message)\n      })\n    },\n    formSort() {\n      if (this.movingGroup.items.length <= 0) {\n        return;\n      }\n      groupItemsSort(this.movingGroup.items.map(g => g.formId)).then(rsp => {\n        //this.$message.success(rsp.message)\n        this.movingGroup = {}\n        this.getGroups()\n      }).catch(err => {\n        this.movingGroup = {}\n        this.getGroups()\n        this.$message.error(err.response.message)\n      })\n    },\n    addGroup() {\n      this.$prompt('请输入要添加的组名', '新的分组名', {\n        confirmButtonText: '提交',\n        cancelButtonText: '取消',\n        inputPattern: /^[\\u4E00-\\u9FA5A-Za-z0-9\\\\-]{1,30}$/,\n        inputErrorMessage: '分组名不能为空且长度小于30',\n        inputPlaceholder: '请输入分组名'\n      }).then(({value}) => {\n        createGroup(value).then(rsp => {\n          this.$message.success(rsp.message)\n          this.getGroups()\n        }).catch(err => this.$message.error(err.response.data))\n      })\n    },\n    delGroup(group) {\n      if (group.items && group.items.length > 0) {\n        this.$message.warning('分组下有表单，禁止删除');\n        return;\n      }\n      this.$confirm('确定要删除分组 ' + group.groupName + '?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        removeGroup(group.groupId).then(rsp => {\n          this.$message.success(rsp.message)\n          this.getGroups()\n        }).catch(err => this.$message.error(err.response.message))\n      })\n    },\n    editGroup(group) {\n      this.$prompt('请输入新的组名', '修改分组名', {\n        confirmButtonText: '提交',\n        cancelButtonText: '取消',\n        inputPattern: /^[\\u4E00-\\u9FA5A-Za-z0-9\\\\-]{1,30}$/,\n        inputErrorMessage: '分组名不能为空且长度小于30',\n        inputPlaceholder: '请输入分组名',\n        inputValue: group.name\n      }).then(({value}) => {\n        updateGroup(group.groupId, {groupId: group.groupId, groupName: value}).then(rsp => {\n          this.$message.success(rsp.message)\n          this.getGroups()\n        }).catch(err => this.$message.error(err.response.data))\n      })\n    },\n    getTemplateData(data, group) {\n      return data\n    },\n    removeForm(item) {\n      this.$confirm('删除流程后无法恢复，是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        removeForm(item).then(rsp => {\n          this.$message.success(rsp.message)\n          this.getGroups()\n          this.moveSelect = null\n        }).catch(err => this.$message.error(err.response.message))\n      });\n    },\n    editFrom(item, group) {\n      this.$router.push(\"/admin/design?code=\" + item.formId + \"&_token=\" + getToken());\n    },\n    stopFrom(item) {\n      if (item.isStop) {\n        this.$confirm('启用后将会进入 “其他” 分组，是否继续？', '提示', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }).then(() => {\n          updateForm(item.formId, {formId: item.formId, groupId: '0'}).then(rsp => {\n            this.$message.success(rsp.message)\n            this.getGroups()\n            this.moveSelect = null\n          }).catch(err => this.$message.error(err.response.message))\n        })\n      } else {\n        this.$confirm('流程停用后将会移到 “已停用” 分组，您可以再次启用或者删除它，是否继续?', '提示', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }).then(() => {\n          updateForm(item.formId, {formId: item.formId, groupId: '-1'}).then(rsp => {\n            this.$message.success(rsp.message)\n            this.getGroups()\n            this.moveSelect = null\n          }).catch(err => this.$message.error(err.response.message))\n        })\n      }\n    },\n    moveFrom(item) {\n      if (item.isStop) {//被禁用的流程，禁止移动\n        this.$message.warning('停用的流程禁止移动，你可以将其启用后移动')\n        return;\n      }\n      if (this.moveSelect === null || this.moveSelect === '') {\n        this.$message.error('请选择分组')\n        return;\n      }\n      updateForm(item.formId, {formId: item.formId, groupId: this.moveSelect}).then(rsp => {\n        //this.$message.success(rsp.message)\n        this.getGroups()\n        this.moveSelect = null\n      }).catch(err => this.$message.error(err.response.message))\n    },\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.undrag {\n  background: #ebecee !important;\n}\n\n.from-panel {\n  padding: 50px 100px;\n  min-width: 500px;\n  background: #ffffff;\n  /deep/ .from-title {\n    div {\n      float: right;\n\n      .el-button {\n        border-radius: 15px;\n      }\n    }\n  }\n}\n\n.choose {\n  background: #e9ebee;\n}\n\n.form-group {\n  margin: 20px 0;\n  padding: 5px 0;\n  border-radius: 6px;\n  transition: all 1s;\n  //border: 1px solid #d3d3d3;\n  box-shadow: 1px 1px 10px 0 #d2d2d2;\n\n  &:hover {\n    box-shadow: 1px 1px 12px 0 #b3b3b3;\n  }\n\n  .form-group-title {\n    padding: 5px 20px;\n    height: 40px;\n    line-height: 40px;\n    border-bottom: 1px solid #d3d3d3;\n\n    .el-icon-rank {\n      display: none;\n    }\n\n    .form-sort, .group-sort {\n      cursor: move;\n    }\n\n    &:hover {\n      .el-icon-rank {\n        display: inline-block;\n      }\n    }\n\n    div {\n      display: inline-block;\n      float: right;\n    }\n\n    span:first-child {\n      margin-right: 5px;\n      font-size: 15px;\n      font-weight: bold;\n    }\n\n    span:nth-child(2) {\n      color: #656565;\n      font-size: small;\n      margin-right: 10px;\n    }\n\n    /deep/ .el-button {\n      color: #404040;\n      margin-left: 20px;\n\n      &:hover {\n        color: #2b2b2b;\n      }\n    }\n  }\n\n  .form-group-item:nth-child(1) {\n    border-top: none !important;\n  }\n\n  .form-group-item {\n    color: #3e3e3e;\n    font-size: small;\n    padding: 10px 0;\n    margin: 0 20px;\n    height: 40px;\n    position: relative;\n    line-height: 40px;\n    border-top: 1px solid #d3d3d3;\n\n    div {\n      display: inline-block;\n    }\n\n    i {\n      border-radius: 10px;\n      padding: 7px;\n      font-size: 20px;\n      color: #ffffff;\n      margin-right: 10px;\n    }\n\n    div:nth-child(1) {\n      float: left;\n    }\n\n    div:nth-child(2) {\n      position: absolute;\n      color: #7a7a7a;\n      font-size: 12px;\n      left: 200px;\n      max-width: 300px;\n      overflow: hidden;\n    }\n\n    div:nth-child(3) {\n      position: absolute;\n      right: 30%;\n    }\n\n    div:nth-child(4) {\n      float: right;\n    }\n  }\n}\n\n@media screen and (max-width: 1000px) {\n  .desp {\n    display: none !important;\n  }\n}\n\n@media screen and (max-width: 800px) {\n  .from-panel {\n    padding: 50px 10px;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FormsPanel.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FormsPanel.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./FormsPanel.vue?vue&type=template&id=19875ec1&scoped=true&\"\nimport script from \"./FormsPanel.vue?vue&type=script&lang=js&\"\nexport * from \"./FormsPanel.vue?vue&type=script&lang=js&\"\nimport style0 from \"./FormsPanel.vue?vue&type=style&index=0&id=19875ec1&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"19875ec1\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}