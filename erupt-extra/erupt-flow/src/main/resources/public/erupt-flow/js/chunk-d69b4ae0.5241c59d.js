(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d69b4ae0"],{"7ca0":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e._self._c;return t("div",["DESIGN"===e.mode?t("div",[t("draggable",{staticClass:"l-drag-from",attrs:{list:e._columns,group:"form",options:{animation:300,chosenClass:"choose",sort:!0}},on:{start:function(t){e.drag=!0,e.selectFormItem=null},end:function(t){e.drag=!1}}},e._l(e._columns,(function(i,n){return t("div",{key:n,staticClass:"l-form-item",style:e.getSelectedClass(i),on:{click:function(t){return t.stopPropagation(),e.selectItem(i)}}},[t("div",{staticClass:"l-form-header"},[t("p",[i.props.required?t("span",[e._v("*")]):e._e(),e._v(e._s(i.title))]),t("div",{staticClass:"l-option"},[t("i",{staticClass:"el-icon-close",on:{click:function(t){return e.delItem(n)}}})]),t("form-design-render",{attrs:{config:i}})],1)])})),0),t("div",{staticStyle:{color:"#c0bebe","text-align":"center",width:"90%",padding:"5px"}},[e._v("☝ 拖拽控件到表格内部")])],1):t("div",[e.rowLayout?t("div",[t("el-table",{staticStyle:{width:"100%"},attrs:{size:"medium","header-cell-style":{background:"#f5f7fa",padding:"3px 0"},border:e.showBorder,data:e._value}},[t("el-table-column",{attrs:{fixed:"",type:"index",label:"序号",width:"50"}}),e._l(e._columns,(function(i,n){return t("el-table-column",{attrs:{"min-width":e.getMinWidth(i),prop:i.id,label:i.title},scopedSlots:e._u([{key:"default",fn:function(n){return[t("form-design-render",{class:{"valid-error":e.showError(i,e._value[n.$index][i.id])},attrs:{mode:e.mode,config:i},model:{value:e._value[n.$index][i.id],callback:function(t){e.$set(e._value[n.$index],i.id,t)},expression:"_value[scope.$index][column.id]"}})]}}],null,!0)})})),t("el-table-column",{attrs:{fixed:"right","min-width":"90",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.copyData(i.$index,i.row)}}},[e._v("复制")]),t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.delRow(i.$index,i.row)}}},[e._v("删除")])]}}],null,!1,3573095417)})],2),t("el-button",{attrs:{size:"small",icon:"el-icon-plus"},on:{click:e.addRow}},[e._v(e._s(e.placeholder))])],1):t("div",[e._l(e._value,(function(i,n){return t("el-form",{key:n,ref:"table-form-"+n,refInFor:!0,staticClass:"table-column",attrs:{rules:e.rules,model:i}},[t("div",{staticClass:"table-column-action"},[t("span",[e._v("第 "+e._s(n+1)+" 项")]),t("i",{staticClass:"el-icon-close",on:{click:function(t){return e.delRow(n,i)}}})]),e._l(e._columns,(function(n,r){return t("el-form-item",{key:"column_"+r,attrs:{prop:n.id,label:n.title}},[t("form-design-render",{attrs:{mode:e.mode,config:n},model:{value:i[n.id],callback:function(t){e.$set(i,n.id,t)},expression:"row[column.id]"}})],1)}))],2)})),t("el-button",{attrs:{size:"small",icon:"el-icon-plus"},on:{click:e.addRow}},[e._v(e._s(e.placeholder))])],2)])])},r=[],a=(i("14d9"),i("b76a")),l=i.n(a),o=i("8032"),s=i("d16b"),u=i("8f73"),c={mixins:[u["a"]],name:"TableList",components:{draggable:l.a,FormDesignRender:s["a"]},props:{value:{type:Array,default:()=>[]},placeholder:{type:String,default:"添加数据"},columns:{type:Array,default:()=>[]},showBorder:{type:Boolean,default:!0},maxSize:{type:Number,default:0},rowLayout:{type:Boolean,default:!0}},created(){Array.isArray(this.value)||(this._value=[])},computed:{rules(){const e={};return this.columns.forEach(t=>{t.props.required&&(e[t.id]=[{type:"Array"===t.valueType?"array":void 0,required:!0,message:"请填写"+t.title,trigger:"blur"}])}),e},_columns:{get(){return this.columns},set(e){this.columns=e}},selectFormItem:{get(){return this.$store.state.selectFormItem},set(e){this.$store.state.selectFormItem=e}}},data(){return{select:null,drag:!1,ValueType:o["a"]}},methods:{getMinWidth(e){switch(e.name){case"DateTime":return"250px";case"DateTimeRange":return"280px";case"MultipleSelect":return"200px";default:return"150px"}},showError(e,t){if(e.props.required)switch(e.valueType){case o["a"].dept:case o["a"].user:case o["a"].dateRange:case o["a"].array:return!(Array.isArray(t)&&t.length>0);default:return!this.$isNotEmpty(t)}return!1},copyData(e,t){this._value.push(this.$deepCopy(t))},delRow(e,t){this._value.splice(e,1)},addRow(){if(this.maxSize>0&&this._value.length>=this.maxSize)this.$message.warning(`最多只能添加${this.maxSize}行`);else{let e={};this.columns.forEach(t=>this.$set(e,t.id,void 0)),this._value.push(e),this.$set(this,"_value",this._value)}},delItem(e){this._columns.splice(e,1)},selectItem(e){this.selectFormItem=e},getSelectedClass(e){return this.selectFormItem&&this.selectFormItem.id===e.id?"border-left: 4px solid #f56c6c":""},validate(e){if(this.rowLayout){let t=!0;for(let i=0;i<this.columns.length;i++)if(this.columns[i].props.required)for(let n=0;n<this._value.length;n++)if(t=!this.showError(this.columns[i],this._value[n][this.columns[i].id]),!t)return void e(!1);e(t)}else{let t=0;this._value.forEach((e,i)=>{let n=this.$refs["table-form-"+i];n&&Array.isArray(n)&&n.length>0&&n[0].validate(e=>{e&&t++})}),t===this._value.length?e(!0):e(!1)}}}},d=c,p=(i("82db"),i("2877")),m=Object(p["a"])(d,n,r,!1,null,"0f04320c",null);t["default"]=m.exports},8032:function(e,t,i){"use strict";i.d(t,"a",(function(){return n})),i.d(t,"b",(function(){return r}));const n={string:"String",object:"Object",array:"Array",number:"Number",date:"Date",user:"User",dept:"Dept",role:"Role",dateRange:"DateRange"},r=[{name:"布局",components:[{title:"分栏布局",name:"SpanLayout",icon:"el-icon-c-scale-to-original",value:[],valueType:n.array,props:{items:[]}}]},{name:"基础组件",components:[{title:"单行文本输入",name:"TextInput",icon:"el-icon-edit",value:"",valueType:n.string,props:{required:!1,enablePrint:!0}},{title:"多行文本输入",name:"TextareaInput",icon:"el-icon-more-outline",value:"",valueType:n.string,props:{required:!1,enablePrint:!0}},{title:"数字输入框",name:"NumberInput",icon:"el-icon-edit-outline",value:"",valueType:n.number,props:{required:!1,enablePrint:!0}},{title:"金额输入框",name:"AmountInput",icon:"iconfont icon-zhufangbutiezhanghu",value:"",valueType:n.number,props:{required:!1,enablePrint:!0,showChinese:!0}},{title:"单选框",name:"SelectInput",icon:"el-icon-circle-check",value:"",valueType:n.string,props:{required:!1,enablePrint:!0,expanding:!1,options:["选项1","选项2"]}},{title:"多选框",name:"MultipleSelect",icon:"iconfont icon-duoxuankuang",value:[],valueType:n.array,props:{required:!1,enablePrint:!0,expanding:!1,options:["选项1","选项2"]}},{title:"日期时间点",name:"DateTime",icon:"el-icon-date",value:"",valueType:n.date,props:{required:!1,enablePrint:!0,format:"yyyy-MM-dd HH:mm"}},{title:"日期时间区间",name:"DateTimeRange",icon:"iconfont icon-kaoqin",valueType:n.dateRange,props:{required:!1,enablePrint:!0,placeholder:["开始时间","结束时间"],format:"yyyy-MM-dd HH:mm",showLength:!1}},{title:"上传图片",name:"ImageUpload",icon:"el-icon-picture-outline",value:[],valueType:n.array,props:{required:!1,enablePrint:!0,maxSize:5,maxNumber:10,enableZip:!0}},{title:"上传附件",name:"FileUpload",icon:"el-icon-folder-opened",value:[],valueType:n.array,props:{required:!1,enablePrint:!0,onlyRead:!1,maxSize:100,maxNumber:10,fileTypes:[]}},{title:"人员选择",name:"UserPicker",icon:"el-icon-user",value:[],valueType:n.user,props:{required:!1,enablePrint:!0,multiple:!1}},{title:"部门选择",name:"DeptPicker",icon:"iconfont icon-map-site",value:[],valueType:n.dept,props:{required:!1,enablePrint:!0,multiple:!1}},{title:"角色选择",name:"RolePicker",icon:"el-icon-s-custom",value:[],valueType:n.role,props:{required:!1,enablePrint:!0,multiple:!1}},{title:"说明文字",name:"Description",icon:"el-icon-warning-outline",value:"",valueType:n.string,props:{required:!1,enablePrint:!0}}]},{name:"扩展组件",components:[{title:"明细表",name:"TableList",icon:"el-icon-tickets",value:[],valueType:n.array,props:{required:!1,enablePrint:!0,showBorder:!0,rowLayout:!0,showSummary:!1,summaryColumns:[],maxSize:0,columns:[]}}]}]},"82db":function(e,t,i){"use strict";i("be15")},"8f73":function(e,t,i){"use strict";t["a"]={props:{mode:{type:String,default:"DESIGN"},formDisable:{type:Boolean,default:!1},required:{type:Boolean,default:!1}},data(){return{}},watch:{_value(e,t){this.$emit("change",e)}},computed:{_value:{get(){return this.value},set(e){this.$emit("input",e)}}},methods:{_opValue(e){return"object"===typeof e?e.value:e},_opLabel(e){return"object"===typeof e?e.label:e}}}},be15:function(e,t,i){}}]);
//# sourceMappingURL=chunk-d69b4ae0.5241c59d.js.map