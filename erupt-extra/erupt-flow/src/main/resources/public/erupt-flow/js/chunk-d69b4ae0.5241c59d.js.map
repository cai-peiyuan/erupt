{"version":3,"sources":["webpack:///./src/views/common/form/components/TableList.vue","webpack:///src/views/common/form/components/TableList.vue","webpack:///./src/views/common/form/components/TableList.vue?18c8","webpack:///./src/views/common/form/components/TableList.vue?5d09","webpack:///./src/views/common/form/ComponentsConfigExport.js","webpack:///./src/views/common/form/components/TableList.vue?323d","webpack:///./src/views/common/form/ComponentMinxins.js"],"names":["render","_vm","this","_c","_self","mode","staticClass","attrs","_columns","animation","chosenClass","sort","on","$event","drag","selectFormItem","_l","cp","id","key","style","getSelectedClass","stopPropagation","selectItem","props","required","_v","_e","_s","title","delItem","staticStyle","rowLayout","background","padding","showBorder","_value","column","index","getMinWidth","scopedSlots","_u","fn","scope","class","showError","$index","model","value","callback","$$v","$set","expression","copyData","row","delRow","addRow","placeholder","i","ref","refInFor","rules","staticRenderFns","mixins","componentMinxins","name","components","draggable","FormDesignRender","type","Array","default","String","columns","Boolean","maxSize","Number","created","isArray","computed","forEach","col","valueType","undefined","message","trigger","get","set","val","$store","state","data","select","ValueType","methods","dept","user","dateRange","array","length","$isNotEmpty","push","$deepCopy","splice","$message","warning","validate","call","result","j","success","v","formRef","$refs","valid","component","string","object","number","date","role","baseComponents","icon","items","enablePrint","showChinese","expanding","options","format","showLength","maxNumber","enableZip","onlyRead","fileTypes","multiple","showSummary","summaryColumns","formDisable","watch","newValue","oldValue","$emit","_opValue","op","_opLabel","label"],"mappings":"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","file":"js/chunk-d69b4ae0.5241c59d.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[(_vm.mode === 'DESIGN')?_c('div',[_c('draggable',{staticClass:\"l-drag-from\",attrs:{\"list\":_vm._columns,\"group\":\"form\",\"options\":{animation: 300, chosenClass:'choose', sort:true}},on:{\"start\":function($event){_vm.drag = true; _vm.selectFormItem = null},\"end\":function($event){_vm.drag = false}}},_vm._l((_vm._columns),function(cp,id){return _c('div',{key:id,staticClass:\"l-form-item\",style:(_vm.getSelectedClass(cp)),on:{\"click\":function($event){$event.stopPropagation();return _vm.selectItem(cp)}}},[_c('div',{staticClass:\"l-form-header\"},[_c('p',[(cp.props.required)?_c('span',[_vm._v(\"*\")]):_vm._e(),_vm._v(_vm._s(cp.title))]),_c('div',{staticClass:\"l-option\"},[_c('i',{staticClass:\"el-icon-close\",on:{\"click\":function($event){return _vm.delItem(id)}}})]),_c('form-design-render',{attrs:{\"config\":cp}})],1)])}),0),_c('div',{staticStyle:{\"color\":\"#c0bebe\",\"text-align\":\"center\",\"width\":\"90%\",\"padding\":\"5px\"}},[_vm._v(\"☝ 拖拽控件到表格内部\")])],1):_c('div',[(_vm.rowLayout)?_c('div',[_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"size\":\"medium\",\"header-cell-style\":{background:'#f5f7fa', padding:'3px 0'},\"border\":_vm.showBorder,\"data\":_vm._value}},[_c('el-table-column',{attrs:{\"fixed\":\"\",\"type\":\"index\",\"label\":\"序号\",\"width\":\"50\"}}),_vm._l((_vm._columns),function(column,index){return _c('el-table-column',{attrs:{\"min-width\":_vm.getMinWidth(column),\"prop\":column.id,\"label\":column.title},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('form-design-render',{class:{'valid-error': _vm.showError(column, _vm._value[scope.$index][column.id])},attrs:{\"mode\":_vm.mode,\"config\":column},model:{value:(_vm._value[scope.$index][column.id]),callback:function ($$v) {_vm.$set(_vm._value[scope.$index], column.id, $$v)},expression:\"_value[scope.$index][column.id]\"}})]}}],null,true)})}),_c('el-table-column',{attrs:{\"fixed\":\"right\",\"min-width\":\"90\",\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"text\"},on:{\"click\":function($event){return _vm.copyData(scope.$index, scope.row)}}},[_vm._v(\"复制\")]),_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"text\"},on:{\"click\":function($event){return _vm.delRow(scope.$index, scope.row)}}},[_vm._v(\"删除\")])]}}],null,false,3573095417)})],2),_c('el-button',{attrs:{\"size\":\"small\",\"icon\":\"el-icon-plus\"},on:{\"click\":_vm.addRow}},[_vm._v(_vm._s(_vm.placeholder))])],1):_c('div',[_vm._l((_vm._value),function(row,i){return _c('el-form',{key:i,ref:`table-form-${i}`,refInFor:true,staticClass:\"table-column\",attrs:{\"rules\":_vm.rules,\"model\":row}},[_c('div',{staticClass:\"table-column-action\"},[_c('span',[_vm._v(\"第 \"+_vm._s(i + 1)+\" 项\")]),_c('i',{staticClass:\"el-icon-close\",on:{\"click\":function($event){return _vm.delRow(i, row)}}})]),_vm._l((_vm._columns),function(column,index){return _c('el-form-item',{key:'column_' + index,attrs:{\"prop\":column.id,\"label\":column.title}},[_c('form-design-render',{attrs:{\"mode\":_vm.mode,\"config\":column},model:{value:(row[column.id]),callback:function ($$v) {_vm.$set(row, column.id, $$v)},expression:\"row[column.id]\"}})],1)})],2)}),_c('el-button',{attrs:{\"size\":\"small\",\"icon\":\"el-icon-plus\"},on:{\"click\":_vm.addRow}},[_vm._v(_vm._s(_vm.placeholder))])],2)])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <div v-if=\"mode === 'DESIGN'\">\n      <draggable class=\"l-drag-from\" :list=\"_columns\" group=\"form\"\n                 :options=\"{animation: 300, chosenClass:'choose', sort:true}\"\n                 @start=\"drag = true; selectFormItem = null\" @end=\"drag = false\">\n        <div v-for=\"(cp, id) in _columns\" :key=\"id\" class=\"l-form-item\" @click.stop=\"selectItem(cp)\" :style=\"getSelectedClass(cp)\">\n          <div class=\"l-form-header\">\n            <p><span v-if=\"cp.props.required\">*</span>{{ cp.title }}</p>\n            <div class=\"l-option\">\n              <i class=\"el-icon-close\" @click=\"delItem(id)\"></i>\n            </div>\n            <form-design-render :config=\"cp\"/>\n          </div>\n        </div>\n      </draggable>\n      <div style=\"color: #c0bebe;text-align: center; width: 90%; padding: 5px;\">☝ 拖拽控件到表格内部</div>\n    </div>\n    <div v-else>\n      <div v-if=\"rowLayout\">\n        <el-table size=\"medium\" :header-cell-style=\"{background:'#f5f7fa', padding:'3px 0'}\" :border=\"showBorder\" :data=\"_value\" style=\"width: 100%\">\n          <el-table-column fixed type=\"index\" label=\"序号\" width=\"50\"></el-table-column>\n          <el-table-column :min-width=\"getMinWidth(column)\" v-for=\"(column, index) in _columns\" :prop=\"column.id\" :label=\"column.title\">\n            <template slot-scope=\"scope\">\n              <form-design-render :class=\"{'valid-error': showError(column, _value[scope.$index][column.id])}\" v-model=\"_value[scope.$index][column.id]\" :mode=\"mode\" :config=\"column\"/>\n            </template>\n          </el-table-column>\n          <el-table-column fixed=\"right\" min-width=\"90\" label=\"操作\">\n            <template slot-scope=\"scope\">\n              <el-button size=\"mini\" type=\"text\" @click=\"copyData(scope.$index, scope.row)\">复制</el-button>\n              <el-button size=\"mini\" type=\"text\" @click=\"delRow(scope.$index, scope.row)\">删除</el-button>\n            </template>\n          </el-table-column>\n        </el-table>\n        <el-button size=\"small\" icon=\"el-icon-plus\" @click=\"addRow\">{{placeholder}}</el-button>\n      </div>\n      <div v-else>\n        <el-form :rules=\"rules\" :model=\"row\" :ref=\"`table-form-${i}`\" class=\"table-column\" v-for=\"(row, i) in _value\" :key=\"i\">\n          <div class=\"table-column-action\">\n            <span>第 {{i + 1}} 项</span>\n            <i class=\"el-icon-close\" @click=\"delRow(i, row)\"></i>\n          </div>\n          <el-form-item v-for=\"(column, index) in _columns\" :key=\"'column_' + index\" :prop=\"column.id\" :label=\"column.title\">\n            <form-design-render v-model=\"row[column.id]\" :mode=\"mode\" :config=\"column\"/>\n          </el-form-item>\n        </el-form>\n        <el-button size=\"small\" icon=\"el-icon-plus\" @click=\"addRow\">{{placeholder}}</el-button>\n      </div>\n    </div>\n  </div>\n\n</template>\n\n<script>\nimport draggable from \"vuedraggable\";\nimport {ValueType} from \"../ComponentsConfigExport\";\nimport FormDesignRender from '@/views/admin/layout/form/FormDesignRender'\nimport componentMinxins from '../ComponentMinxins'\n\nexport default {\n  mixins: [componentMinxins],\n  name: \"TableList\",\n  components: {draggable, FormDesignRender},\n  props: {\n    value:{\n      type: Array,\n      default: () => {\n        return []\n      }\n    },\n    placeholder: {\n      type: String,\n      default: '添加数据'\n    },\n    columns: {\n      type: Array,\n      default: () => {\n        return []\n      }\n    },\n    showBorder: {\n      type: Boolean,\n      default: true\n    },\n    maxSize: {\n      type: Number,\n      default: 0\n    },\n    rowLayout: {\n      type: Boolean,\n      default: true\n    },\n  },\n  created() {\n    if (!Array.isArray(this.value)){\n      this._value = []\n    }\n  },\n  computed: {\n    rules(){\n      const rules = {}\n      this.columns.forEach(col => {\n        if (col.props.required){\n          rules[col.id] = [{\n            type: col.valueType === 'Array' ? 'array':undefined,\n            required: true,\n            message: `请填写${col.title}`, trigger: 'blur'\n          }]\n        }\n      })\n      return rules\n    },\n    _columns: {\n      get() {\n        return this.columns;\n      },\n      set(val) {\n        this.columns = val;\n      }\n    },\n    selectFormItem: {\n      get() {\n        return this.$store.state.selectFormItem\n      },\n      set(val) {\n        this.$store.state.selectFormItem = val\n      },\n    }\n  },\n  data() {\n    return {\n      select: null,\n      drag: false,\n      ValueType\n    }\n  },\n  methods: {\n    getMinWidth(col){\n      switch (col.name){\n        case 'DateTime': return '250px'\n        case 'DateTimeRange': return '280px'\n        case 'MultipleSelect': return '200px'\n        default: return '150px'\n      }\n    },\n    showError(col, val){\n      if (col.props.required){\n        switch (col.valueType){\n          case ValueType.dept:\n          case ValueType.user:\n          case ValueType.dateRange:\n          case ValueType.array: return !(Array.isArray(val) && val.length > 0)\n          default: return !this.$isNotEmpty(val)\n        }\n      }\n      return false\n    },\n    copyData(i, row){\n      this._value.push(this.$deepCopy(row))\n    },\n    delRow(i, row){\n      this._value.splice(i, 1)\n    },\n    addRow(){\n      if (this.maxSize > 0 && this._value.length >= this.maxSize){\n        this.$message.warning(`最多只能添加${this.maxSize}行`)\n      }else {\n        let row = {}\n        this.columns.forEach(col => this.$set(row, col.id, undefined))\n        this._value.push(row)\n        this.$set(this, '_value', this._value)\n      }\n    },\n    delItem(id) {\n      this._columns.splice(id, 1)\n    },\n    selectItem(cp) {\n      this.selectFormItem = cp\n    },\n    getSelectedClass(cp) {\n      return this.selectFormItem && this.selectFormItem.id === cp.id ? 'border-left: 4px solid #f56c6c' : ''\n    },\n    validate(call){\n      if (this.rowLayout){\n        let result = true\n        for (let i = 0; i < this.columns.length; i++) {\n          if (this.columns[i].props.required){\n            for (let j = 0; j < this._value.length; j++) {\n              result = !this.showError(this.columns[i], this._value[j][this.columns[i].id])\n              if (!result){\n                call(false)\n                return\n              }\n            }\n          }\n        }\n        call(result)\n      }else {\n        let success = 0\n        this._value.forEach((v, i) => {\n          let formRef = this.$refs[`table-form-${i}`]\n          if (formRef && Array.isArray(formRef) && formRef.length > 0){\n            formRef[0].validate(valid => {\n              if (valid){\n                success ++;\n              }\n            })\n          }\n        })\n        if (success === this._value.length){\n          call(true)\n        }else {\n          call(false)\n        }\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n\n/deep/ .valid-error {\n  .el-input__inner{\n    border-color: #F56C6C;\n  }\n}\n\n.choose {\n  border: 1px dashed @theme-primary !important;\n}\n\n.table-column {\n  padding: 5px;\n  margin-bottom: 10px;\n  border-left: 3px solid #409eff;\n  border-radius: 5px;\n  background: #fafafa;\n  /deep/ .el-form-item{\n    margin-bottom: 0;\n    .el-form-item__label{\n      height: 25px;\n    }\n  }\n  .table-column-action{\n    float: right;\n    span{\n      color: #afafaf;\n      margin-right: 10px;\n      font-size: 13px;\n    }\n    i{\n      color: #afafaf;\n      padding: 5px;\n      font-size: large;\n      cursor: pointer;\n      &:hover{\n        color: #666666;\n      }\n    }\n  }\n}\n\n.l-drag-from {\n  min-height: 50px;\n  background-color: rgb(245, 246, 246);\n\n  .l-form-item, li {\n    cursor: grab;\n    background: #ffffff;\n    padding: 10px;\n    border: 1px solid #ebecee;\n    margin: 5px 0;\n  }\n}\n\n.l-form-header {\n  font-size: small;\n  color: #818181;\n  text-align: left;\n  position: relative;\n  background-color: #fff;\n\n  p {\n    position: relative;\n    margin: 0 0 10px 0;\n\n    span {\n      position: absolute;\n      left: -8px;\n      top: 3px;\n      color: rgb(217, 0, 19);\n    }\n  }\n\n  .l-option {\n    position: absolute;\n    top: -10px;\n    right: -10px;\n\n    i {\n      font-size: large;\n      cursor: pointer;\n      color: #8c8c8c;\n      padding: 5px;\n\n      &:hover {\n        color: @theme-primary;\n      }\n    }\n  }\n}\n\n</style>\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TableList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TableList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TableList.vue?vue&type=template&id=0f04320c&scoped=true&\"\nimport script from \"./TableList.vue?vue&type=script&lang=js&\"\nexport * from \"./TableList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TableList.vue?vue&type=style&index=0&id=0f04320c&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0f04320c\",\n  null\n  \n)\n\nexport default component.exports","export const ValueType = {\n  string: 'String',\n  object: 'Object',\n  array: 'Array',\n  number: 'Number',\n  date: 'Date',\n  user: 'User',\n  dept: 'Dept',\n  role: 'Role',\n  dateRange: 'DateRange'\n}\n\nexport const baseComponents = [\n  {\n    name: '布局',\n    components: [\n      {\n        title: '分栏布局',\n        name: 'SpanLayout',\n        icon: 'el-icon-c-scale-to-original',\n        value: [],\n        valueType: ValueType.array,\n        props: {\n          items:[]\n        }\n      }\n    ]\n  }, {\n    name: '基础组件',\n    components: [\n      {\n        title: '单行文本输入',\n        name: 'TextInput',\n        icon: 'el-icon-edit',\n        value: '',\n        valueType: ValueType.string,\n        props: {\n          required: false,\n          enablePrint: true\n        }\n      },\n      {\n        title: '多行文本输入',\n        name: 'TextareaInput',\n        icon: 'el-icon-more-outline',\n        value: '',\n        valueType: ValueType.string,\n        props: {\n          required: false,\n          enablePrint: true\n        }\n      },\n      {\n        title: '数字输入框',\n        name: 'NumberInput',\n        icon: 'el-icon-edit-outline',\n        value: '',\n        valueType: ValueType.number,\n        props: {\n          required: false,\n          enablePrint: true,\n        }\n      },\n      {\n        title: '金额输入框',\n        name: 'AmountInput',\n        icon: 'iconfont icon-zhufangbutiezhanghu',\n        value: '',\n        valueType: ValueType.number,\n        props: {\n          required: false,\n          enablePrint: true,\n          showChinese: true\n        }\n      },\n      {\n        title: '单选框',\n        name: 'SelectInput',\n        icon: 'el-icon-circle-check',\n        value: '',\n        valueType: ValueType.string,\n        props: {\n          required: false,\n          enablePrint: true,\n          expanding: false,\n          options: ['选项1', '选项2']\n        }\n      },\n      {\n        title: '多选框',\n        name: 'MultipleSelect',\n        icon: 'iconfont icon-duoxuankuang',\n        value: [],\n        valueType: ValueType.array,\n        props: {\n          required: false,\n          enablePrint: true,\n          expanding: false,\n          options: ['选项1', '选项2']\n        }\n      },\n      {\n        title: '日期时间点',\n        name: 'DateTime',\n        icon: 'el-icon-date',\n        value: '',\n        valueType: ValueType.date,\n        props: {\n          required: false,\n          enablePrint: true,\n          format: 'yyyy-MM-dd HH:mm',\n        }\n      },\n      {\n        title: '日期时间区间',\n        name: 'DateTimeRange',\n        icon: 'iconfont icon-kaoqin',\n        valueType: ValueType.dateRange,\n        props: {\n          required: false,\n          enablePrint: true,\n          placeholder: ['开始时间', '结束时间'],\n          format: 'yyyy-MM-dd HH:mm',\n          showLength: false\n        }\n      },\n      {\n        title: '上传图片',\n        name: 'ImageUpload',\n        icon: 'el-icon-picture-outline',\n        value: [],\n        valueType: ValueType.array,\n        props: {\n          required: false,\n          enablePrint: true,\n          maxSize: 5, //图片最大大小MB\n          maxNumber: 10, //最大上传数量\n          enableZip: true //图片压缩后再上传\n        }\n      },\n      {\n        title: '上传附件',\n        name: 'FileUpload',\n        icon: 'el-icon-folder-opened',\n        value: [],\n        valueType: ValueType.array,\n        props: {\n          required: false,\n          enablePrint: true,\n          onlyRead: false, //是否只读，false只能在线预览，true可以下载\n          maxSize: 100, //文件最大大小MB\n          maxNumber: 10, //最大上传数量\n          fileTypes: [] //限制文件上传类型\n        }\n      },\n      {\n        title: '人员选择',\n        name: 'UserPicker',\n        icon: 'el-icon-user',\n        value: [],\n        valueType: ValueType.user,\n        props: {\n          required: false,\n          enablePrint: true,\n          multiple: false\n        }\n      },\n      {\n        title: '部门选择',\n        name: 'DeptPicker',\n        icon: 'iconfont icon-map-site',\n        value: [],\n        valueType: ValueType.dept,\n        props: {\n          required: false,\n          enablePrint: true,\n          multiple: false\n        }\n      },\n      {\n        title: '角色选择',\n        name: 'RolePicker',\n        icon: 'el-icon-s-custom',\n        value: [],\n        valueType: ValueType.role,\n        props: {\n          required: false,\n          enablePrint: true,\n          multiple: false\n        }\n      },\n      {\n        title: '说明文字',\n        name: 'Description',\n        icon: 'el-icon-warning-outline',\n        value: '',\n        valueType: ValueType.string,\n        props: {\n          required: false,\n          enablePrint: true\n        }\n      },\n    ]\n  }, {\n    name: '扩展组件',\n    components: [\n      {\n        title: '明细表',\n        name: 'TableList',\n        icon: 'el-icon-tickets',\n        value: [],\n        valueType: ValueType.array,\n        props: {\n          required: false,\n          enablePrint: true,\n          showBorder: true,\n          rowLayout: true,\n          showSummary: false,\n          summaryColumns: [],\n          maxSize: 0, //最大条数，为0则不限制\n          columns:[] //列设置\n        }\n      }\n    ]\n  }\n]\n\n\n\nexport default {\n  baseComponents\n}\n\n","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TableList.vue?vue&type=style&index=0&id=0f04320c&prod&lang=less&scoped=true&\"","//混入组件数据\nexport default{\n  props:{\n    mode:{\n      type: String,\n      default: 'DESIGN'\n    },\n    formDisable:{\n      type: Boolean,\n      default: false\n    },\n    required:{\n      type: Boolean,\n      default: false\n    },\n  },\n  data(){\n    return {}\n  },\n  watch: {\n    _value(newValue, oldValue) {\n      this.$emit(\"change\", newValue);\n    }\n  },\n  computed: {\n    _value: {\n      get() {\n        return this.value;\n      },\n      set(val) {\n        this.$emit(\"input\", val);\n      }\n    }\n  },\n  methods: {\n    _opValue(op) {\n      if(typeof(op)==='object') {\n        return op.value;\n      }else {\n        return op;\n      }\n    },\n    _opLabel(op) {\n      if(typeof(op)==='object') {\n        return op.label;\n      }else {\n        return op;\n      }\n    }\n  }\n}\n"],"sourceRoot":""}