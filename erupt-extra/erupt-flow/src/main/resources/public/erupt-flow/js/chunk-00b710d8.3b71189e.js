(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-00b710d8"],{"00ee":function(e,t,s){var i=s("b622"),n=i("toStringTag"),r={};r[n]="z",e.exports="[object z]"===String(r)},"0cb2":function(e,t,s){var i=s("e330"),n=s("7b0b"),r=Math.floor,a=i("".charAt),c=i("".replace),l=i("".slice),o=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,h=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,s,i,d,u){var p=s+e.length,g=i.length,f=h;return void 0!==d&&(d=n(d),f=o),c(u,f,(function(n,c){var o;switch(a(c,0)){case"$":return"$";case"&":return e;case"`":return l(t,0,s);case"'":return l(t,p);case"<":o=d[l(c,1,-1)];break;default:var h=+c;if(0===h)return n;if(h>g){var u=r(h/10);return 0===u?n:u<=g?void 0===i[u-1]?a(c,1):i[u-1]+a(c,1):n}o=i[h-1]}return void 0===o?"":o}))}},"14d9":function(e,t,s){"use strict";var i=s("23e7"),n=s("7b0b"),r=s("07fa"),a=s("3a34"),c=s("3511"),l=s("d039"),o=l((function(){return 4294967297!==[].push.call({length:4294967296},1)})),h=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(e){return e instanceof TypeError}},d=o||!h();i({target:"Array",proto:!0,arity:1,forced:d},{push:function(e){var t=n(this),s=r(t),i=arguments.length;c(s+i);for(var l=0;l<i;l++)t[s]=arguments[l],s++;return a(t,s),s}})},3511:function(e,t){var s=TypeError,i=9007199254740991;e.exports=function(e){if(e>i)throw s("Maximum allowed index exceeded");return e}},"3a34":function(e,t,s){"use strict";var i=s("83ab"),n=s("e8b5"),r=TypeError,a=Object.getOwnPropertyDescriptor,c=i&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}();e.exports=c?function(e,t){if(n(e)&&!a(e,"length").writable)throw r("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t}},"44e7":function(e,t,s){var i=s("861d"),n=s("c6b6"),r=s("b622"),a=r("match");e.exports=function(e){var t;return i(e)&&(void 0!==(t=e[a])?!!t:"RegExp"==n(e))}},5366:function(e,t,s){"use strict";s("f97b")},"577e":function(e,t,s){var i=s("f5df"),n=String;e.exports=function(e){if("Symbol"===i(e))throw TypeError("Cannot convert a Symbol value to a string");return n(e)}},"5b81":function(e,t,s){"use strict";var i=s("23e7"),n=s("c65b"),r=s("e330"),a=s("1d80"),c=s("1626"),l=s("7234"),o=s("44e7"),h=s("577e"),d=s("dc4a"),u=s("90d8"),p=s("0cb2"),g=s("b622"),f=s("c430"),v=g("replace"),m=TypeError,b=r("".indexOf),y=r("".replace),k=r("".slice),w=Math.max,x=function(e,t,s){return s>e.length?-1:""===t?s:b(e,t,s)};i({target:"String",proto:!0},{replaceAll:function(e,t){var s,i,r,g,_,C,S,A,O,I=a(this),U=0,N=0,T="";if(!l(e)){if(s=o(e),s&&(i=h(a(u(e))),!~b(i,"g")))throw m("`.replaceAll` does not allow non-global regexes");if(r=d(e,v),r)return n(r,e,I,t);if(f&&s)return y(h(I),e,t)}g=h(I),_=h(e),C=c(t),C||(t=h(t)),S=_.length,A=w(1,S),U=x(g,_,0);while(-1!==U)O=C?h(t(_,U,g)):p(_,g,U,[],void 0,t),T+=k(g,N,U)+O,N=U+S,U=x(g,_,U+A);return N<g.length&&(T+=k(g,N)),T}})},"709c":function(e,t,s){"use strict";var i=function(){var e=this,t=e._self._c;return t("w-dialog",{attrs:{border:!1,closeFree:"",width:"600px",title:e._title},on:{ok:e.selectOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[t("div",{staticClass:"picker"},[t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"candidate"},["role"!==e.type?t("div",[t("el-input",{staticStyle:{width:"95%"},attrs:{size:"small",clearable:"",placeholder:"搜索","prefix-icon":"el-icon-search"},on:{input:e.searchUser},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.showUsers,expression:"!showUsers"}]},[t("ellipsis",{staticStyle:{height:"18px",color:"#8c8c8c",padding:"5px 0 0"},attrs:{hoverTip:"",row:1,content:e.deptStackStr}},[t("i",{staticClass:"el-icon-office-building",attrs:{slot:"pre"},slot:"pre"})]),t("div",{staticStyle:{"margin-top":"5px"}},[e.multiple?t("el-checkbox",{on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("全选")]):e._e(),t("span",{directives:[{name:"show",rawName:"v-show",value:e.deptStack.length>0,expression:"deptStack.length > 0"}],staticClass:"top-dept",on:{click:e.beforeNode}},[e._v("上一级")])],1)],1)],1):t("div",{staticClass:"role-header"},[t("div",[e._v("系统角色")])]),t("div",{staticClass:"org-items",style:"role"===e.type?"height: 350px":""},[t("el-empty",{directives:[{name:"show",rawName:"v-show",value:!e.nodes||0===e.nodes.length,expression:"!nodes || nodes.length === 0"}],attrs:{"image-size":100,description:"似乎没有数据"}}),e._l(e.nodes,(function(s,i){return t("div",{key:i,class:e.orgItemClass(s)},[s.type===e.type?t("el-checkbox",{on:{change:function(t){return e.selectChange(s)}},model:{value:s.selected,callback:function(t){e.$set(s,"selected",t)},expression:"org.selected"}}):e._e(),"dept"===s.type?t("div",{on:{click:function(t){return e.triggerCheckbox(s)}}},[t("i",{staticClass:"el-icon-folder-opened"}),t("span",{staticClass:"name",attrs:{title:s.name}},[e._v(e._s(s.name.substring(0,12)))]),t("span",{class:"next-dept"+(s.selected?"-disable":""),on:{click:function(t){t.stopPropagation(),!s.selected&&e.nextNode(s)}}},[t("i",{staticClass:"iconfont icon-map-site"}),e._v(" 下级 ")])]):"user"===s.type?t("div",{staticStyle:{display:"flex","align-items":"center"},on:{click:function(t){return e.triggerCheckbox(s)}}},[e.$isNotEmpty(s.avatar)?t("el-avatar",{attrs:{size:35,src:s.avatar}}):t("span",{staticClass:"avatar"},[e._v(e._s(e.getShortName(s.name)))]),t("span",{staticClass:"name",attrs:{title:s.name}},[e._v(e._s(s.name.substring(0,12)))])],1):t("div",{staticStyle:{display:"inline-block"},on:{click:function(t){return e.triggerCheckbox(s)}}},[t("i",{staticClass:"iconfont icon-bumen"}),t("span",{staticClass:"name",attrs:{title:s.name}},[e._v(e._s(s.name.substring(0,12)))])])],1)}))],2)]),t("div",{staticClass:"selected"},[t("div",{staticClass:"count"},[t("span",[e._v("已选 "+e._s(e.select.length)+" 项")]),t("span",{on:{click:e.clearSelected}},[e._v("清空")])]),t("div",{staticClass:"org-items",staticStyle:{height:"350px"}},[t("el-empty",{directives:[{name:"show",rawName:"v-show",value:0===e.select.length,expression:"select.length === 0"}],attrs:{"image-size":100,description:"请点击左侧列表选择数据"}}),e._l(e.select,(function(s,i){return t("div",{key:i,class:e.orgItemClass(s)},["dept"===s.type?t("div",[t("i",{staticClass:"el-icon-folder-opened"}),t("span",{staticClass:"name",staticStyle:{position:"static"}},[e._v(e._s(s.name))])]):"user"===s.type?t("div",{staticStyle:{display:"flex","align-items":"center"}},[e.$isNotEmpty(s.avatar)?t("el-avatar",{attrs:{size:35,src:s.avatar}}):t("span",{staticClass:"avatar"},[e._v(e._s(e.getShortName(s.name)))]),t("span",{staticClass:"name"},[e._v(e._s(s.name))])],1):t("div",[t("i",{staticClass:"iconfont icon-bumen"}),t("span",{staticClass:"name"},[e._v(e._s(s.name))])]),t("i",{staticClass:"el-icon-close",on:{click:function(t){return e.noSelected(i)}}})])}))],2)])])])},n=[],r=(s("5b81"),s("14d9"),s("0c6d"));function a(e){return Object(r["a"])({url:"/oa/org/tree",method:"get",params:e})}function c(e){return Object(r["a"])({url:"/oa/org/tree/user",method:"get",params:e})}function l(e){return Object(r["a"])({url:"/oa/role",method:"get",params:e})}var o={name:"OrgPicker",components:{},props:{title:{default:"请选择",type:String},type:{type:String,required:!0},multiple:{default:!1,type:Boolean},selected:{default:()=>[],type:Array}},data(){return{visible:!1,loading:!1,checkAll:!1,nowDeptId:null,isIndeterminate:!1,searchUsers:[],nodes:[],select:[],search:"",deptStack:[]}},computed:{_title(){return"user"===this.type?"请选择用户"+(this.multiple?"[多选]":"[单选]"):"dept"===this.type?"请选择部门"+(this.multiple?"[多选]":"[单选]"):"role"===this.type?"请选择角色"+(this.multiple?"[多选]":"[单选]"):"-"},deptStackStr(){return String(this.deptStack.map(e=>e.name)).replaceAll(","," > ")},showUsers(){return this.search||""!==this.search.trim()}},methods:{show(){this.visible=!0,this.init(),this.getDataList()},orgItemClass(e){return{"org-item":!0,"org-dept-item":"dept"===e.type,"org-user-item":"user"===e.type,"org-role-item":"role"===e.type}},getDataList(){if(this.loading=!0,"user"===this.type)return c({deptId:this.nowDeptId,keywords:this.search}).then(e=>{this.loading=!1,this.nodes=e.data,this.selectToLeft()}),"请选择用户";"dept"===this.type?a({deptId:this.nowDeptId,keywords:this.search}).then(e=>{this.loading=!1,this.nodes=e.data,this.selectToLeft()}):"role"===this.type&&l({deptId:this.nowDeptId,keywords:this.search}).then(e=>{this.loading=!1,this.nodes=e.data,this.selectToLeft()})},getShortName(e){return e?e.length>2?e.substring(1,3):e:"**"},searchUser(){},selectToLeft(){let e=""===this.search.trim()?this.nodes:this.searchUsers;e.forEach(e=>{for(let t=0;t<this.select.length;t++){if(this.select[t].id===e.id){e.selected=!0;break}e.selected=!1}})},triggerCheckbox(e){e.type==this.type&&(e.selected=!e.selected,this.selectChange(e))},selectChange(e){if(e.selected)this.multiple||(this.nodes.forEach(e=>{e.selected=!1}),this.select=[]),e.selected=!0,this.select.push(e);else{this.checkAll=!1;for(let t=0;t<this.select.length;t++)if(this.select[t].id===e.id){this.select.splice(t,1);break}}},noSelected(e){let t=this.nodes;for(let s=0;s<2;s++){for(let s=0;s<t.length;s++)if(t[s].id===this.select[e].id){t[s].selected=!1,this.checkAll=!1;break}t=this.searchUsers}this.select.splice(e,1)},handleCheckAllChange(){this.nodes.forEach(e=>{if(this.checkAll)e.selected||e.type!=this.type||(e.selected=!0,this.select.push(e));else{e.selected=!1;for(let t=0;t<this.select.length;t++)if(this.select[t].id===e.id){this.select.splice(t,1);break}}})},nextNode(e){this.nowDeptId=e.id,this.deptStack.push(e),this.getDataList()},beforeNode(){0!==this.deptStack.length&&(this.deptStack.length<2?this.nowDeptId=null:this.nowDeptId=this.deptStack[this.deptStack.length-2].id,this.deptStack.splice(this.deptStack.length-1,1),this.getDataList())},recover(){this.select=[],this.nodes.forEach(e=>e.selected=!1)},selectOk(){this.$emit("ok",Object.assign([],this.select.map(e=>(e.avatar=void 0,e)))),this.visible=!1,this.recover()},clearSelected(){this.$confirm("您确定要清空已选中的项?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.recover()})},close(){this.$emit("close"),this.recover()},init(){this.checkAll=!1,this.nowDeptId=null,this.deptStack=[],this.nodes=[],this.select=Object.assign([],this.selected),this.selectToLeft()}}},h=o,d=(s("96dd"),s("2877")),u=Object(d["a"])(h,i,n,!1,null,"100ea722",null);t["a"]=u.exports},"90d8":function(e,t,s){var i=s("c65b"),n=s("1a2d"),r=s("3a9b"),a=s("ad6d"),c=RegExp.prototype;e.exports=function(e){var t=e.flags;return void 0!==t||"flags"in c||n(e,"flags")||!r(c,e)?t:i(a,e)}},"96dd":function(e,t,s){"use strict";s("d66a")},ad6d:function(e,t,s){"use strict";var i=s("825a");e.exports=function(){var e=i(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}},d504:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{"text-align":"center"}},[e.loginUser?t("h4",[e._v(e._s("当前登陆人 "+e.loginUser))]):t("h4",[e._v("请先登录 😅")]),t("div",{staticClass:"work-panel"},[t("div",{staticClass:"user"}),t("div",{staticClass:"panel"},[t("div",{staticClass:"panel-item",on:{click:function(t){return e.to("/workSpace")}}},[e._m(0),t("p",[e._v(" 您可以发起、处理及查看审批，进行日常工作任务 ")])]),t("div",{staticClass:"panel-item",on:{click:function(t){return e.to("/formsPanel")}}},[e._m(1),t("p",[e._v(" 审批工作流创建 、编辑及其他设置操作，均可以在后台进行 ")])])])]),t("org-picker",{ref:"orgPicker",attrs:{type:"user",selected:e.select},on:{ok:e.selected}})],1)},n=[function(){var e=this,t=e._self._c;return t("div",[t("i",{staticClass:"el-icon-s-platform"}),t("span",[e._v("进入工作区")])])},function(){var e=this,t=e._self._c;return t("div",[t("i",{staticClass:"el-icon-s-custom"}),t("span",[e._v("进入管理后台")])])}],r=(s("14d9"),s("709c")),a=s("3786"),c={name:"Index",components:{OrgPicker:r["a"]},data(){return{select:[],loginUser:""}},mounted(){getLoginInfo().then(e=>{this.loginUser=e.nickname,this.select.push({id:e.nickname,name:e.nickname,type:"user"})})},methods:{selected(e){this.select=e,this.loginUser=e.length>0?e[0]:"",this.showUserSelect=!1,sessionStorage.setItem("user",JSON.stringify(this.loginUser))},to(e){null===this.loginUser||""===this.loginUser?(this.$message.warning("未选择登陆人员"),this.$router.push(e+"?_token="+Object(a["a"])())):this.$router.push(e+"?_token="+Object(a["a"])())}}},l=c,o=(s("5366"),s("2877")),h=Object(o["a"])(l,i,n,!1,null,"7990c12b",null);t["default"]=h.exports},d66a:function(e,t,s){},e8b5:function(e,t,s){var i=s("c6b6");e.exports=Array.isArray||function(e){return"Array"==i(e)}},f5df:function(e,t,s){var i=s("00ee"),n=s("1626"),r=s("c6b6"),a=s("b622"),c=a("toStringTag"),l=Object,o="Arguments"==r(function(){return arguments}()),h=function(e,t){try{return e[t]}catch(s){}};e.exports=i?r:function(e){var t,s,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(s=h(t=l(e),c))?s:o?r(t):"Object"==(i=r(t))&&n(t.callee)?"Arguments":i}},f97b:function(e,t,s){}}]);
//# sourceMappingURL=chunk-00b710d8.3b71189e.js.map